Distcc

reference: https://wiki.gentoo.org/wiki/Distcc

requirement across all hosts
    - need to have the same GCC versions.  3.3.x  mixes probably okay, but not 3.3.x  & 3.2.x
    - same version of binutils (eselect binutils list)
    
USE flags:
    gtk - Add support for x11-libs/gtk+ (The GIMP Toolkit) 
    
Pre-run Test:
    Host gentooVM1
        gentooVM1 /home/jlpoole # emerge sys-devel/distcc -p

        These are the packages that would be merged, in order:

        Calculating dependencies... done!
        [ebuild  N     ] acct-group/distcc-1
        [ebuild  N     ] acct-user/distcc-1
        [ebuild  N     ] dev-util/shadowman-3
        [ebuild  N     ] sys-devel/distcc-3.4  USE="gtk ipv6 -gssapi -hardened (-selinux) -xinetd -zeroconf" PYTHON_SINGLE_TARGET="python3_9 -python3_8"
        gentooVM1 /home/jlpoole #

    Target GenPi64
        GenPi64 /home/jlpoole # emerge sys-devel/distcc -p

        These are the packages that would be merged, in order:

        Calculating dependencies... done!
        GenPi64 /home/jlpoole #

Uh oh... what happened GenPi64??

    GenPi64 /home/jlpoole # eix distcc -I
    [I] acct-group/distcc
         Available versions:  1
         Installed versions:  1(08:18:08 AM 01/25/2022)
         Description:         System group: distcc

    [I] acct-user/distcc
         Available versions:  1
         Installed versions:  1(08:18:19 AM 01/25/2022)
         Description:         User used to run distcc daemon

    [I] sys-devel/distcc
         Available versions:  3.3.3-r3 3.4 {gssapi gtk hardened ipv6 selinux xinetd zeroconf PYTHON_SINGLE_TARGET="python3_8 python3_9"}
         Installed versions:  3.4(09:54:22 AM 01/25/2022)(ipv6 -gssapi -gtk -hardened -selinux -xinetd -zeroconf PYTHON_SINGLE_TARGET="python3_9 -python3_8")
         Homepage:            https://github.com/distcc/distcc
         Description:         Distribute compilation of C code across several machines on a network

    Found 3 matches
    GenPi64 /home/jlpoole #

GenPi64 does not have gtk flag, so set the flag and try test emerge.
Had I previously specified USE flags??
    GenPi64 /home/jlpoole # date
    Fri Apr  8 03:40:37 PM UTC 2022
    GenPi64 /home/jlpoole #
    GenPi64 /home/jlpoole # find /etc/portage -type f |xargs grep distcc
    /etc/portage/env/enable-distcc:FEATURES="${FEATURES} distcc"
    /etc/portage/package.env/distcc:sys-apps/rng-tools  enable-distcc
    /etc/portage/package.env/distcc:app-arch/zstd  enable-distcc
    /etc/portage/package.env/distcc:app-editors/nano  enable-distcc
    /etc/portage/package.env/distcc:app-admin/sudo  enable-distcc
    /etc/portage/package.env/distcc:app-arch/bzip2  enable-distcc
    /etc/portage/package.env/distcc:app-arch/gzip  enable-distcc
    /etc/portage/package.env/distcc:app-arch/libarchive  enable-distcc
    /etc/portage/package.env/distcc:app-arch/tar  enable-distcc
    /etc/portage/package.env/distcc:app-arch/unzip  enable-distcc
    /etc/portage/package.env/distcc:app-arch/xz-utils  enable-distcc
    /etc/portage/package.env/distcc:app-crypt/gnupg  enable-distcc
    /etc/portage/package.env/distcc:app-crypt/gpgme  enable-distcc
    /etc/portage/package.env/distcc:app-crypt/libb2  enable-distcc
    /etc/portage/package.env/distcc:app-crypt/pinentry  enable-distcc
    /etc/portage/package.env/distcc:app-editors/emacs  enable-distcc
    /etc/portage/package.env/distcc:app-editors/nano  enable-distcc
    /etc/portage/package.env/distcc:app-editors/vim  enable-distcc
    /etc/portage/package.env/distcc:app-editors/vim-core  enable-distcc
    /etc/portage/package.env/distcc:app-emacs/emacs-common  enable-distcc
    /etc/portage/package.env/distcc:app-misc/c_rehash  enable-distcc
    /etc/portage/package.env/distcc:app-misc/pax-utils  enable-distcc
    /etc/portage/package.env/distcc:app-misc/screen  enable-distcc
    /etc/portage/package.env/distcc:app-portage/eix  enable-distcc
    /etc/portage/package.env/distcc:app-portage/elt-patches  enable-distcc
    /etc/portage/package.env/distcc:app-portage/gemato  enable-distcc
    /etc/portage/package.env/distcc:app-portage/gentoolkit  enable-distcc
    /etc/portage/package.env/distcc:app-shells/bash  enable-distcc
    /etc/portage/package.env/distcc:app-shells/push  enable-distcc
    /etc/portage/package.env/distcc:app-shells/quoter  enable-distcc
    /etc/portage/package.env/distcc:app-text/build-docbook-catalog  enable-distcc
    /etc/portage/package.env/distcc:app-text/docbook-xml-dtd  enable-distcc
    /etc/portage/package.env/distcc:app-text/docbook-xsl-stylesheets  enable-distcc
    /etc/portage/package.env/distcc:app-text/manpager  enable-distcc
    /etc/portage/package.env/distcc:app-text/opensp  enable-distcc
    /etc/portage/package.env/distcc:app-text/po4a  enable-distcc
    /etc/portage/package.env/distcc:dev-db/sqlite  enable-distcc
    /etc/portage/package.env/distcc:dev-embedded/rpi-eeprom  enable-distcc
    /etc/portage/package.env/distcc:dev-lang/perl  enable-distcc
    /etc/portage/package.env/distcc:dev-lang/python  enable-distcc
    /etc/portage/package.env/distcc:dev-lang/python-exec  enable-distcc
    /etc/portage/package.env/distcc:dev-lang/swig  enable-distcc
    /etc/portage/package.env/distcc:dev-lang/tcl  enable-distcc
    /etc/portage/package.env/distcc:dev-libs/gobject-introspection  enable-distcc
    /etc/portage/package.env/distcc:dev-libs/gobject-introspection-common  enable-distcc
    /etc/portage/package.env/distcc:dev-libs/icu  enable-distcc
    /etc/portage/package.env/distcc:dev-libs/json-c  enable-distcc
    /etc/portage/package.env/distcc:dev-libs/jsoncpp  enable-distcc
    /etc/portage/package.env/distcc:dev-libs/libassuan  enable-distcc
    /etc/portage/package.env/distcc:dev-libs/libbsd  enable-distcc
    /etc/portage/package.env/distcc:dev-libs/libestr  enable-distcc
    /etc/portage/package.env/distcc:dev-libs/libfastjson  enable-distcc
    /etc/portage/package.env/distcc:dev-libs/libffi  enable-distcc
    /etc/portage/package.env/distcc:dev-libs/libgcrypt  enable-distcc
    /etc/portage/package.env/distcc:dev-libs/libgpg-error  enable-distcc
    /etc/portage/package.env/distcc:dev-libs/libgudev  enable-distcc
    /etc/portage/package.env/distcc:dev-libs/libical  enable-distcc
    /etc/portage/package.env/distcc:dev-libs/libksba  enable-distcc
    /etc/portage/package.env/distcc:dev-libs/libltdl  enable-distcc
    /etc/portage/package.env/distcc:dev-libs/libpcre  enable-distcc
    /etc/portage/package.env/distcc:dev-libs/libnl  enable-distcc
    /etc/portage/package.env/distcc:dev-libs/libpcre2  enable-distcc
    /etc/portage/package.env/distcc:dev-libs/libpipeline  enable-distcc
    /etc/portage/package.env/distcc:dev-libs/libtasn1  enable-distcc
    /etc/portage/package.env/distcc:dev-libs/libunistring  enable-distcc
    /etc/portage/package.env/distcc:dev-libs/libusb  enable-distcc
    /etc/portage/package.env/distcc:dev-libs/libusb-compat  enable-distcc
    /etc/portage/package.env/distcc:dev-libs/libuv  enable-distcc
    /etc/portage/package.env/distcc:dev-libs/libxslt  enable-distcc
    /etc/portage/package.env/distcc:dev-libs/libyaml  enable-distcc
    /etc/portage/package.env/distcc:dev-libs/lzo  enable-distcc
    /etc/portage/package.env/distcc:dev-libs/mpfr  enable-distcc
    /etc/portage/package.env/distcc:dev-libs/nspr  enable-distcc
    /etc/portage/package.env/distcc:dev-libs/npth  enable-distcc
    /etc/portage/package.env/distcc:dev-libs/popt  enable-distcc
    /etc/portage/package.env/distcc:dev-libs/openssl  enable-distcc
    /etc/portage/package.env/distcc:dev-perl/YAML-Tiny  enable-distcc
    /etc/portage/package.env/distcc:dev-python/certifi  enable-distcc
    /etc/portage/package.env/distcc:dev-python/cffi  enable-distcc
    /etc/portage/package.env/distcc:dev-python/chardet  enable-distcc
    /etc/portage/package.env/distcc:dev-python/cryptography  enable-distcc
    /etc/portage/package.env/distcc:dev-python/cython  enable-distcc
    /etc/portage/package.env/distcc:dev-python/lxml  enable-distcc
    /etc/portage/package.env/distcc:dev-python/pygobject  enable-distcc
    /etc/portage/package.env/distcc:dev-python/pyopenssl  enable-distcc
    /etc/portage/package.env/distcc:dev-util/desktop-file-utils  enable-distcc
    /etc/portage/package.env/distcc:dev-util/glib-utils  enable-distcc
    /etc/portage/package.env/distcc:dev-util/gperf  enable-distcc
    /etc/portage/package.env/distcc:dev-util/intltool  enable-distcc
    /etc/portage/package.env/distcc:dev-util/itstool  enable-distcc
    /etc/portage/package.env/distcc:dev-util/meson  enable-distcc
    /etc/portage/package.env/distcc:dev-util/ninja  enable-distcc
    /etc/portage/package.env/distcc:dev-util/pkgconf  enable-distcc
    /etc/portage/package.env/distcc:dev-util/re2c  enable-distcc
    /etc/portage/package.env/distcc:dev-vcs/git  enable-distcc
    /etc/portage/package.env/distcc:media-libs/freetype  enable-distcc
    /etc/portage/package.env/distcc:media-libs/fontconfig  enable-distcc
    /etc/portage/package.env/distcc:media-libs/lcms  enable-distcc
    /etc/portage/package.env/distcc:media-libs/libpng  enable-distcc
    /etc/portage/package.env/distcc:net-dialup/ppp  enable-distcc
    /etc/portage/package.env/distcc:net-dns/libidn2  enable-distcc
    /etc/portage/package.env/distcc:net-fs/sshfs  enable-distcc
    /etc/portage/package.env/distcc:net-firewall/iptables  enable-distcc
    /etc/portage/package.env/distcc:net-libs/libmbim  enable-distcc
    /etc/portage/package.env/distcc:net-libs/libndp  enable-distcc
    /etc/portage/package.env/distcc:net-libs/libmnl  enable-distcc
    /etc/portage/package.env/distcc:net-libs/libnsl  enable-distcc
    /etc/portage/package.env/distcc:net-libs/libqmi  enable-distcc
    /etc/portage/package.env/distcc:net-libs/libtirpc  enable-distcc
    /etc/portage/package.env/distcc:net-libs/nghttp2  enable-distcc
    /etc/portage/package.env/distcc:net-misc/chrony  enable-distcc
    /etc/portage/package.env/distcc:net-misc/curl  enable-distcc
    /etc/portage/package.env/distcc:net-misc/iputils  enable-distcc
    /etc/portage/package.env/distcc:net-misc/openssh  enable-distcc
    /etc/portage/package.env/distcc:net-misc/rsync  enable-distcc
    /etc/portage/package.env/distcc:net-misc/telnet-bsd  enable-distcc
    /etc/portage/package.env/distcc:net-misc/wget  enable-distcc
    /etc/portage/package.env/distcc:net-wireless/crda  enable-distcc
    /etc/portage/package.env/distcc:net-wireless/iw  enable-distcc
    /etc/portage/package.env/distcc:net-wireless/wpa_supplicant  enable-distcc
    /etc/portage/package.env/distcc:sys-apps/acl  enable-distcc
    /etc/portage/package.env/distcc:sys-apps/attr  enable-distcc
    /etc/portage/package.env/distcc:sys-apps/busybox  enable-distcc
    /etc/portage/package.env/distcc:sys-apps/dbus  enable-distcc
    /etc/portage/package.env/distcc:sys-apps/debianutils  enable-distcc
    /etc/portage/package.env/distcc:sys-apps/file  enable-distcc
    /etc/portage/package.env/distcc:sys-apps/findutils  enable-distcc
    /etc/portage/package.env/distcc:sys-apps/flashrom  enable-distcc
    /etc/portage/package.env/distcc:sys-apps/gawk  enable-distcc
    /etc/portage/package.env/distcc:sys-apps/grep  enable-distcc
    /etc/portage/package.env/distcc:sys-apps/groff  enable-distcc
    /etc/portage/package.env/distcc:sys-apps/i2c-tools  enable-distcc
    /etc/portage/package.env/distcc:sys-apps/iproute2  enable-distcc
    /etc/portage/package.env/distcc:sys-apps/kbd  enable-distcc
    /etc/portage/package.env/distcc:sys-kernel/raspberrypi-kernel  enable-distcc
    GenPi64 /home/jlpoole #

# Add a USE flag did not change missing results:

    GenPi64 /home/jlpoole # emerge sys-devel/distcc -p

    These are the packages that would be merged, in order:

    Calculating dependencies... done!
    GenPi64 /home/jlpoole #

# try using --ask && responding "yes"

    GenPi64 /home/jlpoole # emerge sys-devel/distcc --ask

    These are the packages that would be merged, in order:

    Calculating dependencies... done!


     * sys-devel/distcc

    Would you like to add these packages to your world favorites? [Yes/No] yes
    >>> Recording sys-devel/distcc in "world" favorites file...
    GenPi64 /home/jlpoole #

# something is screwy with portage and/or its settings.  I recall this had some of the 
# sakaki modifications for portage, e.g. parallel processing?

GenPi64 /home/jlpoole # cat /etc/portage/make.conf
CFLAGS="-mtune=cortex-a72 -march=armv8-a+crc -O2 -pipe"
CXXFLAGS="${CFLAGS}"
FCFLAGS="${CFLAGS}"
FFLAGS="${CFLAGS}"
USE="bindist -checkboot -systemd elogind"
FEATURES="parallel-fetch parallel-install -userpriv -usersandbox -network-sandbox -pid-sandbox buildpkg binpkg-multi-instance"
MAKEOPTS="-j2 -l2"
VIDEO_CARDS="vc4 v3d fbdev"
INPUT_DEVICES="libinput"
EMERGE_DEFAULT_OPTS="--binpkg-respect-use=y --binpkg-changed-deps=y --changed-slot=y"
CC="aarch64-unknown-linux-gnu-gcc-11.2.1"
CXX="aarch64-unknown-linux-gnu-g++-11.2.1"
CHOST="aarch64-unknown-linux-gnu"


# tried rem'ing FEATURES and then " emerge sys-devel/distcc -p" and same result: missing output.
GenPi64 /home/jlpoole # # rem'd some more lines
GenPi64 /home/jlpoole # cat /etc/portage/make.conf |grep '^\#'
#USE="bindist -checkboot -systemd elogind"
#FEATURES="parallel-fetch parallel-install -userpriv -usersandbox -network-sandbox -pid-sandbox buildpkg binpkg-multi-instance"
#EMERGE_DEFAULT_OPTS="--binpkg-respect-use=y --binpkg-changed-deps=y --changed-slot=y"
GenPi64 /home/jlpoole #

# Now emerge shows me what I expect:, though it doesn't show what USE flags.... hmmm

    GenPi64 /home/jlpoole # emerge sys-devel/distcc -p

    These are the packages that would be merged, in order:

    Calculating dependencies... done!
    [ebuild   R    ] sys-devel/distcc-3.4
    GenPi64 

# emerge distcc on both machines
8:57 AM 4/8/2022

4:43 PM 4/8/2022

Modified default /etc/conf.d/distccd
specifying log-file => /var/log/disticcd.log
changing niceness to 5
Looks like the allowed IPs are a range which will encompass all of my servers.

Executed:
    touch /var/log/distccd.log 
    chown distcc:root /var/log/distccd.log 
    rc-update add distccd default 
    rc-service distccd start 
    
Skipped section "Specifying participating hosts" since I've only 1 for now.

4:52 PM 4/8/2022
Section "Usage"
added gentooVM1 to the /etc/distcc/hosts file
modified /etc/portage/make.conf
    #
    # 4/8/22 jlpoole: DO NOT use "-march=native" for CFLAGS or CXXFLAGS
    #                 as that will defeat distcc
    #

    FEATURES="distcc"
    #OLD: MAKEOPTS="-j2 -l2"
    #
    # gentooVM1 has 8 cpus, so
    #  8*2 = 16 + 1 for this Raspberry Pi
    #
    MAKEOPTS="-j17 -1M"

# my gtk did not "take"!!
eix:
    [I] sys-devel/distcc
         Available versions:  3.3.3-r3 3.4 {gssapi gtk hardened ipv6 selinux xinetd zeroconf PYTHON_SINGLE_TARGET="python3_8 python3_9"}
         Installed versions:  3.4(03:55:32 PM 04/08/2022)(ipv6 -gssapi -gtk -hardened -selinux -xinetd -zeroconf PYTHON_SINGLE_TARGET="python3_9 -python3_8")
         Homepage:            https://github.com/distcc/distcc
         Description:         Distribute compilation of C code across several machines on a network

"gtk" is necessary for the distccmon-gui, a desirable option.

ISSUE:  what of "CFLAGS="-mtune=cortex-a72 "
The Raspberry Pi 4B has the a74 cortex, whereas the Pi Zero 2 W has the A53 cortex"  If I am going to be switching between these two platorms, better not to have a specific "tuning", or will the compiler try to be smart and tune to the existing environment?

Kept getting error messages.

7:06 PM 4/8/2022
    GenPi64 /home/jlpoole # /usr/bin/distcc-config --set-hosts "192.168.1.41"
    GenPi64 /home/jlpoole # /usr/bin/distcc-config
    Usage: /usr/bin/distcc-config --set-hosts DISTCC_HOSTS | --get-hosts
           /usr/bin/distcc-config --set-verbose { 0 | 1 }  | --get-verbose
           /usr/bin/distcc-config --set-log FILE           | --get-log
           /usr/bin/distcc-config --set-env VARIABLE VALUE | --get-env [VARIABLE]
           /usr/bin/distcc-config --update-masquerade
           /usr/bin/distcc-config --update-masquerade-with-crossdev
    GenPi64 /home/jlpoole # /usr/bin/distcc-config --get-hosts
    192.168.1.41
    GenPi64 /home/jlpoole # /usr/bin/distcc-config --get-verbose
    DISTCC_VERBOSE=0
    GenPi64 /home/jlpoole # /usr/bin/distcc-config --set-verbose 1
    If you want to use these new settings in an existing shell,
    you need to "source /etc/profile" to get the changes.
    GenPi64 /home/jlpoole # >>> Regenerating /etc/ld.so.cache...

    GenPi64 /home/jlpoole # source /etc/profile
    GenPi64 /home/jlpoole #

Friday  Dec 30, 2022  2:57:26 PM
Resuming work on distcc
There may be an issue of which SD I was using when.  Going forward, need to qualify which build I'm working/testing on.

SD "JP Built 3/21" has:

        GenPi64 /home/jlpoole # uname -a
        Linux GenPi64 5.10.92-v8-p4 #1 SMP PREEMPT Sat Mar 19 22:54:43 -00 2022 aarch64 GNU/Linux
        GenPi64 /home/jlpoole #
        
only file in /home/jlpoole:
    crossdev_fine_tune.sh
    
        GenPi64 /home/jlpoole # cat crossdev_fine_tune.sh
        #!/bin/bash
        #
        # 3/22/2022 jlpoole:
        #  from https://wiki.gentoo.org/wiki/Distcc/Cross-Compiling
        # specifically:
        #  https://wiki.gentoo.org/wiki/Distcc/Cross-Compiling#Emerge_the_needed_utilities
        #
        # If you want to fine tune the cross-toolchain, here is a script that
        # will produce a command line with the exact versions
        # of the cross development packages to be built on the helper boxes
        # (the script is to be run on the target box).
        #
        #
        #
        BINUTILS_VER=$(qatom -F '%{PV}' $(qfile -v $(realpath /usr/bin/ld) | cut -d' ' -f1))
        GCC_VER=$(qatom -F '%{PV}' $(qfile -v $(realpath /usr/bin/gcc) | cut -d' ' -f1))
        KERNEL_VER=$(qatom -F '%{PV}' $(qlist -Ive sys-kernel/linux-headers))
        LIBC_VER=$(qatom -F '%{PV}' $(qlist -Ive sys-libs/glibc))
        echo "crossdev --b '~${BINUTILS_VER}' --g '~${GCC_VER}' --k '~${KERNEL_VER}' --l '~${LIBC_VER}' -t $(portageq envvar CHOST)"
        GenPi64 /home/jlpoole # 
        
No evidence of distcc testing, e.g. the test files I compiled and then copied over from Gentoo1.

Friday  Dec 30, 2022  3:8:44 PM booted with Using SN "GenPi64 Lite 3/9/22"
# Found the tests:

    jlpoole@GenPi64 ~ $ ls -lat
    total 104
    -rw------- 1 jlpoole jlpoole 3919 Oct  9 17:01 .bash_history
    drwxr-xr-x 1 jlpoole jlpoole  414 Oct  7 20:53 .
    -rw------- 1 jlpoole jlpoole   20 Oct  7 20:53 .lesshst
    drwxr-xr-x 1 jlpoole jlpoole   38 Apr 16  2022 work
    drwx------ 1 jlpoole jlpoole   18 Apr 14  2022 .config
    drwx------ 1 jlpoole jlpoole   22 Apr 14  2022 .local
    drwxr-xr-x 1 jlpoole jlpoole   32 Apr 14  2022 .cache
    drwxr-xr-x 1 root    root    1538 Apr  9  2022 attic_scripts
    -rw-r--r-- 1 root    root      51 Apr  8  2022 hosts
    -rwxr-xr-x 1 jlpoole jlpoole 9184 Apr  8  2022 arm64_test_C
    -rwxr-xr-x 1 jlpoole jlpoole 9256 Apr  8  2022 arm64_test2_C
    -rwxr-xr-x 1 jlpoole jlpoole 8912 Mar 26  2022 arm64_test_B
    -rwxr-xr-x 1 jlpoole jlpoole 8984 Mar 26  2022 arm64_test2_B
    -rwxr-xr-x 1 jlpoole jlpoole 8912 Mar 26  2022 arm64_test_A
    -rwxr-xr-x 1 jlpoole jlpoole 8984 Mar 26  2022 arm64_test2_A
    -rw-r--r-- 1 jlpoole jlpoole  127 Mar 26  2022 arm64_test2.c
    -rw-r--r-- 1 jlpoole jlpoole   22 Mar 26  2022 arm64-test.c
    drwxr-xr-x 1 jlpoole jlpoole   78 Mar 16  2022 mesontut1
    drwxr-xr-x 1 root    root      40 Mar 10  2022 ..
    -rw-r--r-- 1 jlpoole jlpoole  551 Mar  9  2022 .bashrc
    -rw-r--r-- 1 jlpoole jlpoole  204 Mar  9  2022 .bash_profile
    -rw-r--r-- 1 jlpoole jlpoole  127 Mar  9  2022 .bash_logout
    drwx------ 1 jlpoole jlpoole    0 Jan 16  2022 .ssh
    jlpoole@GenPi64 ~ $

# I guess I used "Genpi64 Lite 3/9/22" instead of the one I built to keep the one I built pristine.
verified gentooVM1 running:

        gentooVM1 /home/jlpoole # /etc/init.d/distccd status
         * status: started
        gentooVM1 /home/jlpoole # date
        Fri Dec 30 15:22:19 PST 2022
        gentooVM1 /home/jlpoole #

started on GenPi64:

        GenPi64 /home/jlpoole # /etc/init.d/distccd start
         * Starting distccd ...                                                                      [ ok ]
        GenPi64 /home/jlpoole # 
Then successfully compiled /home/work/arm64_tes2.c:

        jlpoole@GenPi64 ~ $ gcc -o arm64_test2_202212301518 arm64_test2.c
        jlpoole@GenPi64 ~ $ ./arm64_test2_202212301518
        Hello, World!jlpoole@GenPi64 ~ $ nano arm64_test2.c
        jlpoole@GenPi64 ~ $ 
        
# added \n and recompiled and ran:

        jlpoole@GenPi64 ~ $ gcc -o arm64_test2_202212301518 arm64_test2.c
        jlpoole@GenPi64 ~ $ ./arm64_test2_202212301518
        Hello, World!
        jlpoole@GenPi64 ~ $ date
        Fri Dec 30 03:24:55 PM PST 2022
        jlpoole@GenPi64 ~ $

# regular compile work, not automatically using distcc. 
Ref: https://wiki.gentoo.org/wiki/Distcc#Configuration

Checking configuration on GentooVM1.  

        gentooVM1 /home/jlpoole # date; cat /etc/conf.d/distccd
        Fri Dec 30 15:27:51 PST 2022
        # /etc/conf.d/distccd: config file for /etc/init.d/distccd

        DISTCCD_OPTS=""

        # this is the distccd executable
        DISTCCD_EXEC="/usr/bin/distccd"

        # set this option to run distccd with extra parameters
        # Default port is 3632.  For most people the default is okay.
        DISTCCD_OPTS="${DISTCCD_OPTS} --port 3632"

        # Logging
        # You can change some logging options here:
        # --log-file FILE
        # --log-level LEVEL  [critical,error,warning, notice, info, debug]
        #
        # Leaving --log-file blank will log to syslog
        # example: --log-file /dev/null --log-level warning
        # example: --log-level critical

        DISTCCD_OPTS="${DISTCCD_OPTS} --log-level critical --log-file /var/log/distccd.l                              og"

        # SECURITY NOTICE:
        # It is HIGHLY recommended that you use the --listen option
        # for increased security. You can specify an IP to permit connections
        # from or a CIDR mask
        # --listen accepts only a single IP
        # --allow is now mandatory as of distcc-2.18.
        # example:  --allow 192.168.0.0/24
        # example:  --allow 192.168.0.5 --allow 192.168.0.150
        # example:  --listen 192.168.0.2
        DISTCCD_OPTS="${DISTCCD_OPTS} --allow 192.168.0.0/24 --allow 192.168.1.97"
        #DISTCCD_OPTS="${DISTCCD_OPTS} --listen 192.168.0.2"
        # set this for niceness
        # Default is 15
        DISTCCD_OPTS="${DISTCCD_OPTS} -N 3"

        # By default distccd stores temporary files in /tmp
        # Make sure to give distcc user write permission to
        # the given TMPDIR
        #TMPDIR="/tmp"
        gentooVM1 /home/jlpoole # 

    
added "--listen 192.168.1.97"
restarted /etc/init.d/distccd


Verified my IP for GenPi64 is 192.168.1.97

Confirmed log file is owned by user distcc

    gentooVM1 /home/jlpoole # ls -la /var/log/distccd.log
    -rw-r--r-- 1 distcc root 0 Apr  8  2022 /var/log/distccd.log
    gentooVM1 /home/jlpoole #

Following Section "Specifying participating hosts"
on GenPi64:

# what are my options?

    /usr/bin/distcc-config
    
        jlpoole@GenPi64 ~ $ /usr/bin/distcc-config
        Usage: /usr/bin/distcc-config --set-hosts DISTCC_HOSTS | --get-hosts
               /usr/bin/distcc-config --set-verbose { 0 | 1 }  | --get-verbose
               /usr/bin/distcc-config --set-log FILE           | --get-log
               /usr/bin/distcc-config --set-env VARIABLE VALUE | --get-env [VARIABLE]
               /usr/bin/distcc-config --update-masquerade
               /usr/bin/distcc-config --update-masquerade-with-crossdev
        jlpoole@GenPi64 ~ $ date; /usr/bin/distcc-config --get-hosts
        Fri Dec 30 03:47:46 PM PST 2022
        192.168.1.41
        jlpoole@GenPi64 ~ $ date; /usr/bin/distcc-config --get-log
        Fri Dec 30 03:48:13 PM PST 2022
        DISTCC_LOG not set.
        jlpoole@GenPi64 ~ $  touch /var/log/distccd.log
        touch: cannot touch '/var/log/distccd.log': Permission denied
        jlpoole@GenPi64 ~ $ su
        Password:
        GenPi64 /home/jlpoole #  touch /var/log/distccd.log
        GenPi64 /home/jlpoole # chown distcc:root /var/log/distccd.log
        GenPi64 /home/jlpoole # exit
        exit
        jlpoole@GenPi64 ~ $ date; /usr/bin/distcc-config --get-log
        Fri Dec 30 03:49:00 PM PST 2022
        DISTCC_LOG not set.
        jlpoole@GenPi64 ~ $ date; /usr/bin/distcc-config --set-log /var/log/distccd.log
        Fri Dec 30 03:49:23 PM PST 2022
        !!! /usr/bin/distcc-config --set-log must be run as root
        jlpoole@GenPi64 ~ $ su
        Password:
        su: Permission denied
        jlpoole@GenPi64 ~ $ su
        Password:
        GenPi64 /home/jlpoole #  date; /usr/bin/distcc-config --set-log /var/log/distccd.log
        Fri Dec 30 03:49:52 PM PST 2022
        If you want to use these new settings in an existing shell,
        you need to "source /etc/profile" to get the changes.
        GenPi64 /home/jlpoole # >>> Regenerating /etc/ld.so.cache...

        GenPi64 /home/jlpoole # exit
        exit
        jlpoole@GenPi64 ~ $ source /etc/profile
        jlpoole@GenPi64 ~ $ cat /etc/distcc/hosts
        192.168.1.41
        jlpoole@GenPi64 ~ $

# jumps to section "Testing"

    cp arm64_test2.c main.c
    nano main.c [added " via distcc"]
    export DISTCC_VERBOSE=1
    distcc gcc -c main.c -o main.o 
    
        jlpoole@GenPi64 ~ $ cp arm64_test2.c main.c
        jlpoole@GenPi64 ~ $ nano main.c
        jlpoole@GenPi64 ~ $ export DISTCC_VERBOSE=1
        jlpoole@GenPi64 ~ $ distcc gcc -c main.c -o main.o
        distcc[2412] (dcc_trace_version) distcc 3.4 aarch64-unknown-linux-gnu; built Apr  8 2022 15:55:00
        distcc[2412] (dcc_recursion_safeguard) safeguard level=0
        distcc[2412] (main) compiler name is "distcc"
        distcc[2412] (dcc_scan_args) scanning arguments: gcc -c main.c -o main.o
        distcc[2412] (dcc_scan_args) found input file "main.c"
        distcc[2412] (dcc_scan_args) found object/output file "main.o"
        distcc[2412] compile from main.c to main.o
        distcc[2412] (dcc_gcc_rewrite_fqn) Re-writing call to 'gcc' to 'aarch64-unknown-linux-gnu-gcc' to support cross-compilation.
        distcc[2412] (dcc_get_hostlist) not reading /home/jlpoole/.distcc/hosts: No such file or directory
        distcc[2412] (dcc_parse_hosts_file) load hosts from /etc/distcc/hosts
        distcc[2412] (dcc_parse_hosts) found tcp token "192.168.1.41"
        distcc[2412] (dcc_lock_host) got cpu lock on 192.168.1.41 slot 0 as fd3
        distcc[2412] (dcc_lock_host) got cpu lock on localhost slot 0 as fd4
        distcc[2412] (dcc_note_state) note state 3, file "(NULL)", host "localhost"
        distcc[2412] (dcc_strip_dasho) result: aarch64-unknown-linux-gnu-gcc -c main.c
        distcc[2412] (dcc_spawn_child) forking to execute: aarch64-unknown-linux-gnu-gcc -E main.c
        distcc[2412] (dcc_spawn_child) child started as pid2413
        distcc[2412] (dcc_strip_local_args) result: aarch64-unknown-linux-gnu-gcc -c main.c -o main.o
        distcc[2412] exec on 192.168.1.41: aarch64-unknown-linux-gnu-gcc -c main.c -o main.o
        distcc[2412] (dcc_note_state) note state 2, file "main.c", host "192.168.1.41"
        distcc[2413] (dcc_new_pgrp) entered process group
        distcc[2413] (dcc_increment_safeguard) setting safeguard: _DISTCC_SAFEGUARD=1
        distcc[2412] (dcc_connect_by_name_real) connecting to 192.168.1.41 port 3632
        distcc[2412] (dcc_connect_by_addr) started connecting to 192.168.1.41:3632
        distcc[2412] (dcc_select_for_write) select for write on fd5
        distcc[2412] ERROR: nonblocking connect to 192.168.1.41:3632 failed: Connection refused
        distcc[2412] (dcc_unlock) release lock fd4
        distcc[2412] (dcc_mark_timefile) mark /home/jlpoole/.distcc/lock/backoff_tcp_192.168.1.41_3632_0
        distcc[2412] (dcc_unlock) release lock fd3
        distcc[2412] (dcc_get_hostlist) not reading /home/jlpoole/.distcc/hosts: No such file or directory
        distcc[2412] (dcc_parse_hosts_file) load hosts from /etc/distcc/hosts
        distcc[2412] (dcc_parse_hosts) found tcp token "192.168.1.41"
        distcc[2412] (dcc_check_backoff) still in backoff period for 192.168.1.41
        distcc[2412] (dcc_remove_disliked) remove 192.168.1.41 from list
        distcc[2412] (dcc_mark_timefile) mark /home/jlpoole/.distcc/lock/backoff_tcp_192.168.1.41_3632_0
        distcc[2412] Warning: failed to distribute main.c to 192.168.1.41, running locally instead
        distcc[2412] (dcc_get_hostlist) not reading /home/jlpoole/.distcc/hosts: No such file or directory
        distcc[2412] (dcc_parse_hosts_file) load hosts from /etc/distcc/hosts
        distcc[2412] (dcc_parse_hosts) found tcp token "192.168.1.41"
        distcc[2412] (dcc_lock_host) got cpu lock on localhost slot 0 as fd3
        distcc[2412] exec on localhost: aarch64-unknown-linux-gnu-gcc -c main.c -o main.o
        distcc[2412] (dcc_note_state) note state 5, file "main.c", host "localhost"
        distcc[2412] (dcc_spawn_child) forking to execute: aarch64-unknown-linux-gnu-gcc -c main.c -o main.o
        distcc[2412] (dcc_spawn_child) child started as pid2414
        distcc[2414] (dcc_increment_safeguard) setting safeguard: _DISTCC_SAFEGUARD=1
        distcc[2412] (dcc_collect_child) cc child 2414 terminated with status 0
        distcc[2412] (dcc_collect_child) cc times: user 0.000000s, system 0.000000s, 0 minflt, 0 majflt
        distcc[2412] compile main.c on localhost completed ok
        distcc[2412] (dcc_unlock) release lock fd3
        distcc[2412] elapsed compilation time 0.121119s
        distcc[2412] (dcc_exit) exit: code 0; self: 0.000000 user 0.011181 sys; children: 0.060709 user 0.051266 sys
        distcc[2412] (dcc_cleanup_tempfiles_inner) deleted 2 temporary files
        jlpoole@GenPi64 ~ $ ls -lat
        total 124
        -rw-r--r-- 1 jlpoole jlpoole 1624 Dec 30 15:58 main.o

# changed the "--listen to 192.168.1.41".  "listen" confirms the IP of the server offering the service, not the possible clients.  I thought "listen" meant listening for potential clients and only isolating those specified by listen.  I was wrong.

        jlpoole@GenPi64 ~ $ distcc gcc -c main.c -o main.o
        distcc[2440] (dcc_trace_version) distcc 3.4 aarch64-unknown-linux-gnu; built Apr  8 2022 15:55:00
        distcc[2440] (dcc_recursion_safeguard) safeguard level=0
        distcc[2440] (main) compiler name is "distcc"
        distcc[2440] (dcc_scan_args) scanning arguments: gcc -c main.c -o main.o
        distcc[2440] (dcc_scan_args) found input file "main.c"
        distcc[2440] (dcc_scan_args) found object/output file "main.o"
        distcc[2440] compile from main.c to main.o
        distcc[2440] (dcc_gcc_rewrite_fqn) Re-writing call to 'gcc' to 'aarch64-unknown-linux-gnu-gcc' to support cross-compilation.
        distcc[2440] (dcc_get_hostlist) not reading /home/jlpoole/.distcc/hosts: No such file or directory
        distcc[2440] (dcc_parse_hosts_file) load hosts from /etc/distcc/hosts
        distcc[2440] (dcc_parse_hosts) found tcp token "192.168.1.41"
        distcc[2440] (dcc_lock_host) got cpu lock on 192.168.1.41 slot 0 as fd3
        distcc[2440] (dcc_lock_host) got cpu lock on localhost slot 0 as fd4
        distcc[2440] (dcc_note_state) note state 3, file "(NULL)", host "localhost"
        distcc[2440] (dcc_strip_dasho) result: aarch64-unknown-linux-gnu-gcc -c main.c
        distcc[2440] (dcc_spawn_child) forking to execute: aarch64-unknown-linux-gnu-gcc -E main.c
        distcc[2440] (dcc_spawn_child) child started as pid2441
        distcc[2440] (dcc_strip_local_args) result: aarch64-unknown-linux-gnu-gcc -c main.c -o main.o
        distcc[2440] exec on 192.168.1.41: aarch64-unknown-linux-gnu-gcc -c main.c -o main.o
        distcc[2440] (dcc_note_state) note state 2, file "main.c", host "192.168.1.41"
        distcc[2441] (dcc_new_pgrp) entered process group
        distcc[2441] (dcc_increment_safeguard) setting safeguard: _DISTCC_SAFEGUARD=1
        distcc[2440] (dcc_connect_by_name_real) connecting to 192.168.1.41 port 3632
        distcc[2440] (dcc_connect_by_addr) started connecting to 192.168.1.41:3632
        distcc[2440] (dcc_select_for_write) select for write on fd5
        distcc[2440] (dcc_note_state) note state 4, file "(NULL)", host "(NULL)"
        distcc[2440] (dcc_x_token_int) send DIST00000001
        distcc[2440] (dcc_x_token_int) send ARGC00000005
        distcc[2440] (dcc_x_token_int) send ARGV0000001d
        distcc[2440] (dcc_x_token_string) send string 'aarch64-unknown-linux-gnu-gcc'
        distcc[2440] (dcc_x_token_int) send ARGV00000002
        distcc[2440] (dcc_x_token_string) send string '-c'
        distcc[2440] (dcc_x_token_int) send ARGV00000006
        distcc[2440] (dcc_x_token_string) send string 'main.c'
        distcc[2440] (dcc_x_token_int) send ARGV00000002
        distcc[2440] (dcc_x_token_string) send string '-o'
        distcc[2440] (dcc_x_token_int) send ARGV00000006
        distcc[2440] (dcc_x_token_string) send string 'main.o'
        distcc[2440] (dcc_note_state) note state 3, file "(NULL)", host "(NULL)"
        distcc[2440] (dcc_collect_child) cpp child 2441 terminated with status 0
        distcc[2440] (dcc_collect_child) cpp times: user 0.000000s, system 0.000000s, 0 minflt, 0 majflt
        distcc[2440] cpp main.c on localhost completed ok
        distcc[2440] (dcc_unlock) release lock fd4
        distcc[2440] (dcc_x_file) send 16276 byte file /tmp/distcc_f05a7da2.i with token DOTI and compression 69
        distcc[2440] (dcc_x_token_int) send DOTI00003f94
        distcc[2440] (dcc_compile_remote) client finished sending request to server
        distcc[2440] (dcc_note_state) note state 5, file "(NULL)", host "192.168.1.41"
        distcc[2440] (dcc_select_for_read) select for read on fd5 for 300s
        distcc[2440] (dcc_r_token_int) got DONE00000001
        distcc[2440] (dcc_r_result_header) got response header
        distcc[2440] (dcc_note_state) note state 6, file "(NULL)", host "(NULL)"
        distcc[2440] (dcc_r_token_int) got STAT00000000
        distcc[2440] (dcc_r_token_int) got SERR00000000
        distcc[2440] (dcc_r_file) received 0 bytes to file /tmp/distcc_server_stderr_f9947da2.txt
        distcc[2440] (dcc_r_token_int) got SOUT00000000
        distcc[2440] (dcc_r_token_int) got DOTO00000688
        distcc[2440] (dcc_r_file) received 1672 bytes to file main.o
        distcc[2440] (dcc_r_file_timed) 1672 bytes received in 0.000494s, rate 3305kB/s
        distcc[2440] 16276 bytes from main.c compiled on 192.168.1.41 in 1.1364s, rate 14kB/s
        distcc[2440] (dcc_remove_timefile) remove /home/jlpoole/.distcc/lock/backoff_tcp_192.168.1.41_3632_0
        distcc[2440] (dcc_unlock) release lock fd3
        distcc[2440] compile main.c on 192.168.1.41 completed ok
        distcc[2440] elapsed compilation time 1.139770s
        distcc[2440] (dcc_exit) exit: code 0; self: 0.002300 user 0.009201 sys; children: 0.046031 user 0.029691 sys
        distcc[2440] (dcc_cleanup_tempfiles_inner) deleted 2 temporary files
        jlpoole@GenPi64 ~ $ gcc main.o -o main
        jlpoole@GenPi64 ~ $ ./main
        Hello, World! vis distcc
        jlpoole@GenPi64 ~ $
# corrected typo in main.c:  vis => via

SUCCESS.

# Next step, configure portage to use distcc
# following section Usage - with Portage

# Before doing so, pick a package (without a lot of dependencies, or already built dependencies) that takes some time and emerge it while everying in portage is regular, then we have a baseline of Raspberry Pi time vs. Cross-compiler.

tried media-libs/tiff.  The process jumped into distcc, so I guess I had previously set up portage with distcc.  The build failed.
Log at: https://pastebin.com/CMpfAXwY

Tried w/o distcc and SUCCESS;  date; time FEATURES="-distcc" emerge media-libs/tiff
Log at: https://pastebin.com/ZZxhiHPM


try:  dev-libs/xerces-c-3.2.3-r2 

    date; time FEATURES="-distcc" emerge dev-libs/xerces-c
    7 minutes log: https://pastebin.com/tRkZaRBt
  
# Remove 
  
        GenPi64 /etc/portage/package.unmask # emerge -c dev-libs/xerces-c

        Calculating dependencies... done!
        >>> Calculating removal order...

         dev-libs/xerces-c
            selected: 3.2.3-r2
           protected: none
             omitted: none

        All selected packages: =dev-libs/xerces-c-3.2.3-r2

        >>> 'Selected' packages are slated for removal.
        >>> 'Protected' and 'omitted' packages will not be removed.

        >>> Waiting 5 seconds before starting...
        >>> (Control-C to abort)...
        >>> Unmerging in: 5 4 3 2 1
        >>> Unmerging (1 of 1) dev-libs/xerces-c-3.2.3-r2...
        Packages installed:   490
        Packages in world:    26
        Packages in system:   43
        Packages in profile:  37
        Required packages:    490
        Number removed:       1

         * GNU info directory index is up-to-date.

         * IMPORTANT: 2 news items need reading for repository 'gentoo'.
         * Use eselect news read to view new items.

        GenPi64 /etc/portage/package.unmask #

# Try with distcc

    date; time emerge dev-libs/xerces-c