[
    {"name": "kernel", "deps": [""], "parser": "emerge", "args": ["$(/em-config kernel '* ') -bk --jobs $(/em-config jobs) --load-average $(/em-config load-average) --tree"]},
    {"name": "kernelpath_pi3", "deps": ["kernel"], "parser": "crudini", "args": ["--set", "--inplace", "--existing=file", "boot/config.txt", "", "kernel", "kernel8.img"]},
    {"name": "addinitramfs_pi3", "deps": ["kernelpath_pi3"], "parser": "crudini", "args": ["--set", "--inplace", "--existing=file", "boot/config.txt", "", "initramfs", "initramfs-2.0.0.cpio.gz"]},
    {"name": "kernelpath_pi4", "deps": ["addinitramfs_pi3"], "parser": "crudini", "args": ["--set", "--inplace", "--existing=file", "boot/config.txt", "pi4", "kernel", "kernel8-p4.img"]},
    {"name": "addinitramfs_pi4", "deps": ["kernelpath_pi4"], "parser": "crudini", "args": ["--set", "--inplace", "--existing=file", "boot/config.txt", "pi4", "initramfs", "initramfs-2.0.0.cpio.gz"]},
    {"name": "enable_vc4_kms_pi4", "deps": ["addinitramfs_pi4"], "parser": "crudini", "args": ["--set", "--inplace", "--existing=file", "boot/config.txt", "pi4", "dtoverlay", "vc4-fkms-v3d-pi4.dtbo"]},
    {"name": "enableuart", "deps": ["enable_vc4_kms_pi4"], "parser": "crudini", "args": ["--set", "--inplace", "--existing=file", "boot/config.txt", "all", "enable_uart", "1"]},
    {"name": "disableoverscan", "deps": ["enableuart"], "parser": "crudini", "args": ["--set", "--inplace", "--existing=file", "boot/config.txt", "all", "disable_overscan", "1"]},
    {"name": "packstage4", "deps": ["disableoverscan"], "parser": "packstage4", "args": [""]},
    {"name": "packgenpi", "deps": ["packstage4"], "parser": "includejson", "args": ["subtargets/pack-genpi.json"]}
]
